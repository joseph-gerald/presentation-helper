<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Sometype Mono:wght@400;500,600,700,800&amp;display=swap">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="tailwind.config.js"></script>

    <script src="/lib/toast.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ireade/Toast.js@master/dist/css/Toast.min.css">

    <link rel="stylesheet" href="style/global.css">

    <title>Presentation Helper</title>
</head>

<body class="font-body text-[#dcdcdc] bg-[#0a0a0a] min-h-screen">
    <div id="main" class="container mx-auto min-h-screen flex flex-col items-center justify-center">
        <div id="container" class="w-full max-w-[730px] px-5 flex flex-col items-center">
            <div id="intro" class="flex flex-col items-center hidden">
                <p>
                    <a href="#" id="init-present" class="font-semibold hover:underline">present</a> <span
                        class="text-sm">or</span>
                    <a href="#" id="init-help" class="font-semibold hover:underline">help</a>
                </p>
            </div>

            <div id="presenter" class="hidden">
                <div class="flex justify-between gap-20">
                    <div class="flex flex-col items-center gap-4">
                        <p class="mt-3">
                        <h1 id="searching-loop" class="text-xl font-semibold">
                            Searching for desktop agent

                            <script>
                                const searchingLoop = document.getElementById("searching-loop");

                                let dots = 0;
                                setInterval(() => {
                                    dots++;
                                    if (dots > 3) dots = 0;

                                }, 500);
                            </script>
                        </h1>

                        <span class="flex absolute h-3 w-3 -mt-1 -mr-1">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </span>

                        <small class="bg-[#FF604018] border border-[#FF604018] p-2 flex items-center rounded text-xs">
                            <svg class="fill-orange-900 mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                                aria-hidden="true">
                                <path
                                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z">
                                </path>
                            </svg>

                            No agent found. <a href="#" class="font-semibold hover:underline ml-2">Click Here To
                                Download</a>
                        </small>
                        </p>
                    </div>
                </div>
            </div>

            <div id="presenter" class="">
                <div class="flex justify-between gap-20">
                    <div class="flex flex-col items-center gap-4">
                        <small class="mt-8">Connect with the code</small>
                        <p class="text-7xl font-semibold font-mono -mt-4">
                            FS9D
                        </p>

                        <h1 id="searching-loop" class="text-lg< font-semibold">
                            Awaiting Helper
                        </h1>

                        <span class="flex absolute h-3 w-3 -mt-1 -mr-1">
                            <span
                                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </span>
                    </div>
                </div>
            </div>

            <div id="helper" class="hidden">
                <div class="flex justify-between gap-20">
                    <div class="flex flex-col items-center gap-4">
                        <h1 id="searching-loop" class="text-xl font-semibold">
                            Missing Sensors
                        </h1>

                        <small
                            class="bg-[#FF604018] border border-[#FF604018] p-2 flex lg:items-center rounded text-xs">
                            <svg class="fill-orange-900 mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                                aria-hidden="true">
                                <path
                                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z">
                                </path>
                            </svg>

                            <p>
                                The following was not found: <a href="#"
                                    class="font-semibold hover:underline">Gyroscope</a>
                            </p>
                        </small>


                        <a href="#" class="hover:underline font-semibold mt-1">
                            <small onclick="show('intro')">> Go Back</small>
                        </a>
                        </p>
                    </div>
                </div>
            </div>

            <div id="helper-no-gyro" class="hidden">
                <div class="flex justify-between gap-20">
                    <div class="flex flex-col items-center gap-4">
                        <p class="mt-3">

                        <h1 id="searching-loop" class="text-xl font-semibold">
                            Missing Sensors
                        </h1>

                        <small
                            class="bg-[#FF604018] border border-[#FF604018] p-2 flex lg:items-center rounded text-xs">
                            <svg class="fill-orange-900 mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16"
                                aria-hidden="true">
                                <path
                                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z">
                                </path>
                            </svg>

                            <p>
                                The following was not found: <a href="#"
                                    class="font-semibold hover:underline">Gyroscope</a>
                            </p>
                        </small>


                        <a href="#" class="hover:underline font-semibold mt-1">
                            <small onclick="show('intro')">> Go Back</small>
                        </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    const main = document.getElementById("main");
    const container = document.getElementById("container");

    const screens = {
        intro: document.getElementById("intro"),
        presenter: document.getElementById("presenter"),
        helper: document.getElementById("helper")
    }

    const initPresent = document.getElementById("init-present");
    const initHelp = document.getElementById("init-help");

    function show(name) {
        Object.keys(screens).forEach(screen => {
            screens[screen].classList.add("hidden");
        });

        screens[name].classList.remove("hidden");
    }

    initPresent.addEventListener("click", (e) => {
        e.preventDefault();
        show("presenter");
    });

    initHelp.addEventListener("click", (e) => {
        e.preventDefault();
        show("helper");
    });
    
    const socket = new WebSocket("ws://localhost:8765");

    socket.onclose = () => {
        location.reload();
    }

    socket.onopen = () => {
        let keepaliveCount = 0;
        setInterval(() => { socket.send("keepalive/" + keepaliveCount++); }, 60 * 1000);

        console.log("connected");
    }
</script>

</html>